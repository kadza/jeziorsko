<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kite Spots</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              textColor: "#39563e",
              hoverColor: "#c7a370",
            },
            fontFamily: {
              montserrat: ['"Montserrat"', "sans-serif"],
            },
          },
        },
      };
    </script>
  </head>
  <body
    class="m-0 p-0 flex flex-col items-center text-textColor"
    style="background-color: #fadca5"
  >
    <div class="container flex flex-col">
      <nav class="h-32 flex items-center">
        <div class="mx-auto flex uppercase justify-start w-full">
          <div class="flex space-x-16 w-full font-montserrat text-[2rem]">
            <a href="/index.html" class="hover:text-hoverColor">Kite Łódź</a>
            <a href="prognoza.html" class="hover:text-hoverColor">Prognoza</a>
            <a href="aktualne.html" class="hover:text-hoverColor">Aktualne</a>
          </div>
        </div>
      </nav>

      <div class="flex-grow">
        <div class="w-full flex flex-col items-start space-y-2 mb-4">
          <h2 class="text-2xl">Jeziorsko - Prognoza</h2>
          <div class="w-full flex flex-col items-start">
            <img
              id="meteo-forecast"
              src=""
              class="border-0"
            />
          </div>
          <div class="w-full flex flex-col items-start">
            <div id="wg_fwdg_3644_100_1752307649736"></div>
            <script>
              (function (window, document) {
                var loader = function () {
                  var arg = [
                    "s=3644",
                    "m=100",
                    "uid=wg_fwdg_3644_100_1752307649736",
                    "wj=knots",
                    "tj=c",
                    "waj=m",
                    "tij=cm",
                    "odh=0",
                    "doh=24",
                    "fhours=240",
                    "hrsm=2",
                    "vt=forecasts",
                    "lng=en",
                    "idbs=1",
                    "p=WINDSPD,GUST,SMER,TMPE,FLHGT,CDC,APCP1s,RATING",
                  ];
                  var script = document.createElement("script");
                  var tag = document.getElementsByTagName("script")[0];
                  script.src =
                    "https://www.windguru.cz/js/widget.php?" + arg.join("&");
                  tag.parentNode.insertBefore(script, tag);
                };
                window.addEventListener
                  ? window.addEventListener("load", loader, false)
                  : window.attachEvent("onload", loader);
              })(window, document);
            </script>
          </div>
          <div class="w-full">
            <script src="https://www.windfinder.com/widget/forecast/js/jeziorsko_popow?unit_wave=m&unit_rain=mm&unit_temperature=c&unit_wind=kts&unit_pressure=hPa&days=4&show_day=1&show_waves=0"></script>
            <noscript
              ><a
                rel="nofollow"
                href="https://www.windfinder.com/forecast/jeziorsko_popow?utm_source=forecast&utm_medium=web&utm_campaign=homepageweather&utm_content=noscript-forecast"
                >Wind forecast for Jeziorsko Popów</a
              >
              provided by
              <a
                rel="nofollow"
                href="https://www.windfinder.com?utm_source=forecast&utm_medium=web&utm_campaign=homepageweather&utm_content=noscript-logo"
                >windfinder.com</a
              ></noscript
            >
          </div>
          <div class="w-full flex justify-start">
            <iframe
              class="w-full h-[450px]"
              src="https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=mm&metricTemp=°C&metricWind=kt&zoom=11&overlay=wind&product=ecmwf&level=surface&lat=51.792&lon=18.906&detailLat=51.83&detailLon=18.728&detail=true"
              frameborder="0"
            ></iframe>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const now = new Date();
        const delayedDate = new Date(now.getTime() - 21600000); // Subtract 6 hours

        const options = { timeZone: 'Europe/Warsaw', year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', hour12: false };
        const formatter = new Intl.DateTimeFormat('en-CA', options);
        const parts = formatter.formatToParts(delayedDate);
        
        const year = parts.find(p => p.type === 'year').value;
        const month = parts.find(p => p.type === 'month').value;
        const day = parts.find(p => p.type === 'day').value;
        const hour = parseInt(parts.find(p => p.type === 'hour').value, 10);

        const forecastHourSlot = Math.floor(hour / 6) * 6;
        const formattedHour = String(forecastHourSlot).padStart(2, '0');

        const fdate = `${year}${month}${day}${formattedHour}`;
        
        const forecastUrl = `https://old.meteo.pl/um/metco/mgram_pict.php?ntype=0u&fdate=${fdate}&row=416&col=206&lang=pl`;
        
        document.getElementById('meteo-forecast').src = forecastUrl;
      });
    </script>
  </body>
</html>
